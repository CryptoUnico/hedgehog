(this.webpackJsonphedgehog=this.webpackJsonphedgehog||[]).push([[0],{245:function(e,t,a){var n=a(544);e.exports=n},247:function(e,t,a){e.exports=a(551)},252:function(e,t,a){},253:function(e,t){},254:function(e,t){},267:function(e,t){},269:function(e,t){},279:function(e,t){},281:function(e,t){},299:function(e,t){},300:function(e,t){},328:function(e,t){},337:function(e,t){},417:function(e,t){},419:function(e,t){},447:function(e,t){},449:function(e,t){},455:function(e,t){},456:function(e,t){},458:function(e,t){},470:function(e,t){},473:function(e,t){},478:function(e,t){},489:function(e,t){},492:function(e,t){},544:function(e,t,a){var n=a(184),s=a(3),i=a(83),o=a(50),r=a(51),u=a(545),p=a(546),l=a(547),c=a(548),y=a(549).convertToFloatingPoint,d=function(){"use strict";function e(t){var n=t.web3,s=t.config;if(o(this,e),!n)throw new Error("You must pass in a web3 instance");this.config=s||a(550),this.web3=n}return r(e,[{key:"getDefaultFilters",value:function(){return[function(e){return e.expiry>Math.floor(Date.now()/1e3)}]}},{key:"init",value:function(){var e=i(s.mark((function e(){var t,a,n,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{filters:this.getDefaultFilters()},a=t.filters,e.next=3,this.getOptionsContractAddresses();case 3:return e.next=5,this.getOptionsInformation(this.optionsAddresses);case 5:return n=e.sent,this.optionsContracts=this.filterOptionsContracts(n,a),e.abrupt("return",this.optionsContracts);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOptionsContractAddresses",value:function(){var e=this;return new Promise((function(t,a){new e.web3.eth.Contract(p,e.config.factory).methods.getNumberOfOptionsContracts().call().then((function(s){var i=n(Array(parseInt(s)).keys()).map((function(t){return{ethCall:new e.web3.eth.Contract(p,e.config.factory).methods.optionsContracts(t).call}}));u.makeBatchRequest(e.web3,i).then((function(a){e.optionsAddresses=a,t(a)})).catch((function(e){a("Failed during fetch of pool addresses "+e)}))})).catch((function(e){return a("Failed to fetch option contracts count "+e)}))}))}},{key:"getOptionsInformation",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filters:[]};a.filters;return new Promise((function(a,n){var s=["name","isExerciseWindow","totalSupply","decimals","liquidationFactor","optionsExchange","underlying","COMPOUND_ORACLE","liquidationIncentive","owner","isOwner","hasExpired","symbol","transactionFee","strike","underlyingExp","collateralExp","oTokenExchangeRate","minCollateralizationRatio","strikePrice","collateral","expiry"],i=["liquidationFactor","liquidationIncentive","transactionFee","oTokenExchangeRate","minCollateralizationRatio","strikePrice"],o=["optionsExchange","underlying","COMPOUND_ORACLE","owner","strike","collateral"],r=e.map((function(e){return s.map((function(a){return{ethCall:new t.web3.eth.Contract(c,e).methods[a]().call,onError:function(t){return console.log("Error on: "+e+" "+a)}}}))})).flat();u.makeBatchRequest(t.web3,r).then((function(n){for(var r=[],u=0;u<e.length;u++){var p={};p.address=e[u].toLowerCase();for(var l=0;l<s.length;l++){var c=s[l],d=n[u*s.length+l];i.includes(c)?p[c]=y(d):o.includes(c)?p[c]=d.toLowerCase():p[c]=d}r.push(p)}t.optionsContracts=r,a(r)})).catch((function(e){n(e)}))}))}},{key:"filterOptionsContracts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=e;if(t.length>0)for(var n=function(n){var s=t[n];a=e.filter((function(e){return s(e)}))},s=0;s<t.length;s++)n(s);return a}},{key:"premiumToPay",value:function(e,t,a){return new this.web3.eth.Contract(l,this.config.exchange).methods.premiumToPay(e,t,a).call()}},{key:"getPriceOfPurchase",value:function(e,t,a){var n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48";return n=t?Math.round(a/e.strikePrice):Math.round(a*Math.pow(10,e.decimals)),this.premiumToPay(e.address,s,n)}}]),e}();e.exports=d},546:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[{"name":"","type":"string"}],"name":"tokens","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_asset","type":"string"},{"name":"_addr","type":"address"}],"name":"changeAsset","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"optionsExchange","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getNumberOfOptionsContracts","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_collateralType","type":"string"},{"name":"_collateralExp","type":"int32"},{"name":"_underlyingType","type":"string"},{"name":"_underlyingExp","type":"int32"},{"name":"_oTokenExchangeExp","type":"int32"},{"name":"_strikePrice","type":"uint256"},{"name":"_strikeExp","type":"int32"},{"name":"_strikeAsset","type":"string"},{"name":"_expiry","type":"uint256"},{"name":"_windowSize","type":"uint256"}],"name":"createOptionsContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"oracleAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_asset","type":"string"},{"name":"_addr","type":"address"}],"name":"addAsset","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_asset","type":"string"}],"name":"supportsAsset","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_asset","type":"string"}],"name":"deleteAsset","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"optionsContracts","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_optionsExchangeAddr","type":"address"},{"name":"_oracleAddress","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"addr","type":"address"}],"name":"OptionsContractCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"asset","type":"string"},{"indexed":true,"name":"addr","type":"address"}],"name":"AssetAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"asset","type":"string"},{"indexed":true,"name":"addr","type":"address"}],"name":"AssetChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"asset","type":"string"}],"name":"AssetDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"}]')},547:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[{"name":"oTokenAddress","type":"address"},{"name":"payoutTokenAddress","type":"address"},{"name":"oTokensToSell","type":"uint256"}],"name":"premiumReceived","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"receiver","type":"address"},{"name":"oTokenAddress","type":"address"},{"name":"payoutTokenAddress","type":"address"},{"name":"oTokensToSell","type":"uint256"}],"name":"sellOTokens","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"receiver","type":"address"},{"name":"oTokenAddress","type":"address"},{"name":"paymentTokenAddress","type":"address"},{"name":"oTokensToBuy","type":"uint256"}],"name":"buyOTokens","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"oTokenAddress","type":"address"},{"name":"paymentTokenAddress","type":"address"},{"name":"oTokensToBuy","type":"uint256"}],"name":"premiumToPay","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"UNISWAP_FACTORY","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"paymentToken","type":"address"},{"name":"oToken","type":"address"},{"name":"_amt","type":"uint256"},{"name":"_transferTo","type":"address"}],"name":"uniswapBuyOToken","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_uniswapFactory","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"seller","type":"address"},{"indexed":false,"name":"receiver","type":"address"},{"indexed":false,"name":"oTokenAddress","type":"address"},{"indexed":false,"name":"payoutTokenAddress","type":"address"},{"indexed":false,"name":"oTokensToSell","type":"uint256"},{"indexed":false,"name":"payoutTokensReceived","type":"uint256"}],"name":"SellOTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"buyer","type":"address"},{"indexed":false,"name":"receiver","type":"address"},{"indexed":false,"name":"oTokenAddress","type":"address"},{"indexed":false,"name":"paymentTokenAddress","type":"address"},{"indexed":false,"name":"oTokensToBuy","type":"uint256"},{"indexed":false,"name":"premiumPaid","type":"uint256"}],"name":"BuyOTokens","type":"event"}]')},548:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"vaultOwner","type":"address"},{"name":"amt","type":"uint256"}],"name":"addERC20Collateral","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getVaultOwners","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"amount","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"hasVault","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isExerciseWindow","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"vaultOwner","type":"address"}],"name":"getVault","outputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"oTokensToIssue","type":"uint256"},{"name":"receiver","type":"address"}],"name":"issueOTokens","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sender","type":"address"},{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"amtCollateral","type":"uint256"},{"name":"receiver","type":"address"}],"name":"addAndSellERC20CollateralOption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amtToRemove","type":"uint256"}],"name":"removeCollateral","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"liquidationFactor","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"receiver","type":"address"}],"name":"createAndSellETHCollateralOption","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"optionsExchange","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"amtCollateral","type":"uint256"},{"name":"receiver","type":"address"}],"name":"createERC20CollateralOption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"oTokensToExercise","type":"uint256"},{"name":"vaultsToExerciseFrom","type":"address[]"}],"name":"exercise","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"amtCollateral","type":"uint256"},{"name":"receiver","type":"address"}],"name":"addERC20CollateralOption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"collateralAmt","type":"uint256"}],"name":"maxOTokensIssuable","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"underlying","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"oTokensToExercise","type":"uint256"}],"name":"underlyingRequiredToExercise","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"account","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"openVault","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"COMPOUND_ORACLE","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"liquidationIncentive","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"hasExpired","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"vaultOwner","type":"address"}],"name":"addETHCollateral","outputs":[{"name":"","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"transactionFee","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"strike","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"underlyingExp","outputs":[{"name":"","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"collateralExp","outputs":[{"name":"","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"oTokenExchangeRate","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"redeemVaultBalance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_symbol","type":"string"}],"name":"setDetails","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"receiver","type":"address"}],"name":"addETHCollateralOption","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"minCollateralizationRatio","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"vaultOwner","type":"address"},{"name":"oTokensToLiquidate","type":"uint256"}],"name":"liquidate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"strikePrice","outputs":[{"name":"value","type":"uint256"},{"name":"exponent","type":"int32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"amtCollateral","type":"uint256"},{"name":"receiver","type":"address"}],"name":"createAndSellERC20CollateralOption","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"vaultOwner","type":"address"}],"name":"isUnsafe","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"receiver","type":"address"}],"name":"addAndSellETHCollateralOption","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"collateral","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"vaultOwner","type":"address"}],"name":"maxOTokensLiquidatable","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"expiry","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"transferFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amtToBurn","type":"uint256"}],"name":"burnOTokens","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amtToCreate","type":"uint256"},{"name":"receiver","type":"address"}],"name":"createETHCollateralOption","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_liquidationIncentive","type":"uint256"},{"name":"_liquidationFactor","type":"uint256"},{"name":"_transactionFee","type":"uint256"},{"name":"_minCollateralizationRatio","type":"uint256"}],"name":"updateParameters","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_ierc20","type":"address"}],"name":"isETH","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[],"name":"removeUnderlying","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_collateral","type":"address"},{"name":"_collExp","type":"int32"},{"name":"_underlying","type":"address"},{"name":"_underlyingExp","type":"int32"},{"name":"_oTokenExchangeExp","type":"int32"},{"name":"_strikePrice","type":"uint256"},{"name":"_strikeExp","type":"int32"},{"name":"_strike","type":"address"},{"name":"_expiry","type":"uint256"},{"name":"_optionsExchange","type":"address"},{"name":"_oracleAddress","type":"address"},{"name":"_windowSize","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"vaultOwner","type":"address"}],"name":"VaultOpened","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"vaultOwner","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"payer","type":"address"}],"name":"ETHCollateralAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"vaultOwner","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"payer","type":"address"}],"name":"ERC20CollateralAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"issuedTo","type":"address"},{"indexed":false,"name":"oTokensIssued","type":"uint256"},{"indexed":false,"name":"vaultOwner","type":"address"}],"name":"IssuedOTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amtCollateralToPay","type":"uint256"},{"indexed":false,"name":"vaultOwner","type":"address"},{"indexed":false,"name":"liquidator","type":"address"}],"name":"Liquidate","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amtUnderlyingToPay","type":"uint256"},{"indexed":false,"name":"amtCollateralToPay","type":"uint256"},{"indexed":false,"name":"exerciser","type":"address"},{"indexed":false,"name":"vaultExercisedFrom","type":"address"}],"name":"Exercise","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amtCollateralRedeemed","type":"uint256"},{"indexed":false,"name":"amtUnderlyingRedeemed","type":"uint256"},{"indexed":false,"name":"vaultOwner","type":"address"}],"name":"RedeemVaultBalance","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"vaultOwner","type":"address"},{"indexed":false,"name":"oTokensBurned","type":"uint256"}],"name":"BurnOTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amtRemoved","type":"uint256"},{"indexed":false,"name":"vaultOwner","type":"address"}],"name":"RemoveCollateral","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"liquidationIncentive","type":"uint256"},{"indexed":false,"name":"liquidationFactor","type":"uint256"},{"indexed":false,"name":"transactionFee","type":"uint256"},{"indexed":false,"name":"minCollateralizationRatio","type":"uint256"},{"indexed":false,"name":"owner","type":"address"}],"name":"UpdateParameters","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"fees","type":"uint256"}],"name":"TransferFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"amountUnderlying","type":"uint256"},{"indexed":false,"name":"vaultOwner","type":"address"}],"name":"RemoveUnderlying","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"}]')},549:function(e,t){e.exports={convertToFloatingPoint:function(e){return e.value*Math.pow(10,e.exponent)}}},550:function(e){e.exports=JSON.parse('{"factory":"0xcc5d905b9c2c8c9329eb4e25dc086369d6c7777c","exchange":"0x39246c4F3F6592C974EBC44F80bA6dC69b817c71"}')},551:function(e,t,a){"use strict";a.r(t);var n=a(11),s=a.n(n),i=a(234),o=a.n(i),r=(a(252),a(54)),u=a(55),p=a(4),l=a(5),c=a(7),y=a(6),d=a(94),m=a(140),f=a(57),b=a(242),v=a.n(b),h=a(246),x=a(243),w=a.n(x),g=["0x0000000000000000000000000000000000000000","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"],C=function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===g[1]&&(e=g[0]),t===g[1]&&(t=g[1]),e>t?e+t:t+e},O=function(e,t,a){t=t.toLowerCase(),a=a.toLowerCase();var n=[];return g.includes(t)?(n.push(C(a,g[0])),n.push(C(a,g[1]))):g.includes(a)?(n.push(C(t,g[0])),n.push(C(t,g[1]))):n.push(C(t,a)),w()(e[n[0]],e[n[1]]||{})},k=function(e){var t=1/(e.strikePrice*Math.pow(10,e.decimals));return Math.round(t)},E=function(e){var t=e.strikePrice*Math.pow(10,e.decimals);return Math.round(t)},M=[1.25,1.5,1.75,2,3,4,5],T=function(e){return Math.abs(Math.sqrt(e)/(e+1)*2-1)},P=function(e,t,a,n){var s,i=e.map((function(e){return e.absolutePrice}));if(!i.includes(n)){var o=i.findIndex((s=n,function(e){return e>s})),r=n/a;e.splice(o,0,{priceFactor:r,absolutePrice:n,impermanentLoss:T(r),identifier:t?"callStrike":"putStrike"})}},N=function(e,t){var a=t?"callStrike":"putStrike",n=e.filter((function(e){return e.identifier===a})).map((function(e){return e.absolutePrice}));n.length>0&&e.forEach((function(e){t?e.callReturn=e.absolutePrice<=n[0]?0:e.absolutePrice-n[0]:e.putReturn=e.absolutePrice>=n[0]?0:n[0]-e.absolutePrice}))},D=function(e,t,a,n){var s=M.filter((function(t){return t<=e})).map((function(e){return{priceFactor:e,impermanentLoss:T(e)}})),i=function(e){return e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{absolutePrice:e.priceFactor*t})}))},o=[i(Object(r.a)(s).reverse().map((function(e){return Object(u.a)(Object(u.a)({},e),{},{priceFactor:1/e.priceFactor})}))),{priceFactor:1,impermanentLoss:0,absolutePrice:t},i(s)].flat();return a&&P(o,!0,t,a),n&&P(o,!1,t,n),function(e){N(e,!0),N(e,!1)}(o),o},F=function(e){var t=e.priceFactor,a=e.currentPrice,n=e.callOption,s=e.putOption,i=e.onPriceUpdate,o=e.opynConnector,r=n?k(n):void 0,u=s?E(s):void 0,p=D(t,a,r,u),l=0;p[0].putReturn>0&&(l=p[0].impermanentLoss*a/p[0].putReturn);var c=0;p[p.length-1].callReturn>0&&(c=p[p.length-1].impermanentLoss*a/p[p.length-1].callReturn);var y={chart:{type:"spline"},title:{text:"Profit/Loss"},series:[{name:"Impermanent Loss",data:p.map((function(e){return e.impermanentLoss*a}))}],xAxis:{categories:p.map((function(e){return e.absolutePrice.toPrecision(5).toString()+function(e,t){var a=100*(t.priceFactor-1);return 0===a?"":a>0?"<br />(+"+a.toFixed(1).toString()+"%)":"<br />("+a.toFixed(1).toString()+"%)"}(0,e)})),title:{text:"Price (USDC)"}},yAxis:{title:{text:"Profit/Loss (USDC)"}}},d=Date.now();return Promise.all(function(){var e=function(e,t,a){return e?o.getPriceOfPurchase(e,t,a):new Promise((function(e){e(0)}))};return[e(n,!0,1),e(s,!1,1)]}()).then((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];i(d,{timestamp:d,callCost:a,putCost:n,callsNeeded:c,putsNeeded:l})})),u&&y.series.push({name:"Put Returns",data:p.map((function(e){return l*e.putReturn}))}),r&&y.series.push({name:"Call Returns",data:p.map((function(e){return c*e.callReturn}))}),{chartData:y,optionsRequired:{callsNeeded:c,putsNeeded:l}}},S=a(65),A=function(e){Object(c.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={currentPair:S[0],priceFactor:2,optionsExpiry:Object.keys(e.props.optionsData[C(S[0].token0,S[0].token1)])[0],callIndex:0,putIndex:0,callsNeeded:0,putsNeeded:0,currentPrice:1,pairIndex:0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.recalculateChartData(),this.fetchUniswapPoolPrice()}},{key:"componentDidUpdate",value:function(e,t){e.opynConnector;var a=Object(m.a)(e,["opynConnector"]),n=this.props,s=(n.opynConnector,Object(m.a)(n,["opynConnector"]));JSON.stringify(a)===JSON.stringify(s)&&JSON.stringify(t)===JSON.stringify(this.state)||this.recalculateChartData()}},{key:"fetchUniswapPoolPrice",value:function(){var e=this,t=new f.d(f.a.MAINNET,S[this.state.pairIndex].token1,6);f.b.fetchPairData(t,f.e[t.chainId]).then((function(a){var n=new f.c([a],f.e[t.chainId]),s=parseFloat(n.midPrice.toFixed(2).toString());e.setState({currentPrice:s})}))}},{key:"setPriceFactor",value:function(e){this.setState({priceFactor:e})}},{key:"setOptionsExpiry",value:function(e){var t=e.target.value;this.setState({optionsExpiry:t,putIndex:0,callIndex:0})}},{key:"setOptionIndex",value:function(e,t){var a=t?"putIndex":"callIndex";this.setState(Object(d.a)({},a,parseInt(e.target.value)))}},{key:"recalculateChartData",value:function(){var e=this.state,t=e.priceFactor,a=(e.optionsExpiry,e.putIndex),n=e.callIndex,s=e.currentPrice,i=this.props,o=(i.optionsData,i.updateChartData),r=i.opynConnector,u=this.getPutOptions()[a],p=this.getCallOptions()[n],l=F({priceFactor:t,currentPrice:s,callOption:p,putOption:u,onPriceUpdate:this.props.updatePriceData,opynConnector:r}),c=l.chartData,y=l.optionsRequired,d=y.callsNeeded,m=y.putsNeeded;this.setState({callsNeeded:d,putsNeeded:m}),o(c)}},{key:"getCallOptions",value:function(){var e=this.state,t=e.currentPair,a=e.optionsExpiry,n=this.props.optionsData,s=O(n,t.token0,t.token1)[a];return s?s.filter((function(e){return"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"===e.underlying})):[]}},{key:"getPutOptions",value:function(){var e=this.state,t=e.currentPair,a=e.optionsExpiry,n=this.props.optionsData,s=O(n,t.token0,t.token1)[a];return s?s.filter((function(e){return"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"!==e.underlying})):[]}},{key:"render",value:function(){var e=this,t=this.props.optionsData,a=this.state,n=a.priceFactor,i=a.optionsExpiry,o=a.callsNeeded,r=a.putsNeeded,u=a.currentPair;return s.a.createElement("div",{className:"options-form"},s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"pool"},"Pick a pool:")),s.a.createElement("select",{name:"pool",id:"pool",className:"form-control"},S.map((function(e,t){return s.a.createElement("option",{value:t},e.token0_name+"-"+e.token1_name)}))),s.a.createElement("br",null),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"priceFactor"},"Price Change to Hedge:")),s.a.createElement("div",{className:"button-group"},s.a.createElement("button",{className:2===n?"selected":"",onClick:function(){return e.setPriceFactor(2)}},"2x"),s.a.createElement("button",{className:3===n?"selected":"",onClick:function(){return e.setPriceFactor(3)}},"3x"),s.a.createElement("button",{className:4===n?"selected":"",onClick:function(){return e.setPriceFactor(4)}},"4x"),s.a.createElement("button",{className:5===n?"selected":"",onClick:function(){return e.setPriceFactor(5)}},"5x")),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"expiry"},"Options Expiry Date:")),s.a.createElement("select",{name:"expiry",id:"expiry",className:"form-control",value:i,onChange:function(t){return e.setOptionsExpiry(t)}},Object.keys(O(t,u.token0,u.token1)).map((function(e){return s.a.createElement("option",{value:e},v()(new Date(1e3*e),"d mmmm yyyy h:MM"))}))),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"call"},"Call Strike Price:")),s.a.createElement("select",{name:"call",id:"call",className:"form-control",onChange:function(t){return e.setOptionIndex(t,!1)}},this.getCallOptions().length<1?s.a.createElement("option",{value:"-1",disabled:"disabled"},"No calls available"):this.getCallOptions().map((function(e,t){return s.a.createElement("option",{value:t},k(e))}))),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"put"},"Put Strike Price:")),s.a.createElement("select",{name:"put",id:"put",className:"form-control",onChange:function(t){return e.setOptionIndex(t,!0)}},this.getPutOptions().length<1?s.a.createElement("option",{value:"-1",disabled:"disabled"},"No puts available"):this.getPutOptions().map((function(e,t){return s.a.createElement("option",{value:t},E(e))}))),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"call-tokens-amount"},"Call options to Buy:")),s.a.createElement("input",{className:"form-control",name:"call-tokens-amount",value:o,disabled:!0}),s.a.createElement("div",{className:"label-holder"},s.a.createElement("label",{htmlFor:"put-tokens-amount"},"Put options to Buy:")),s.a.createElement("input",{className:"form-control",name:"put-tokens-amount",value:r,disabled:!0}))}}]),a}(n.Component),_=a(133),R=a.n(_),I=a(244),q=a.n(I),L=a(139),j=a.n(L),U=a(245),B=a.n(U),H=function(e){Object(c.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={chartData:{},ethereum:{},optionsData:{},priceData:{timestamp:0,callCost:0,putCost:0,callsNeeded:0,putsNeeded:0}},e}return Object(l.a)(a,[{key:"calculateOptionsCost",value:function(){var e=this.state.priceData,t=e.callCost,a=e.putCost,n=e.callsNeeded,s=e.putsNeeded,i=function(e,t){return e&&t?e/1e6*t:0};return i(t,n)+i(a,s)}},{key:"chartDataToDisplay",value:function(){var e=this;if(Object.keys(this.state.chartData).length>0){var t=Object(u.a)({},this.state.chartData);return t.series=Object(r.a)(t.series),t.series.push({name:"Options Cost",data:t.series[0].data.map((function(t){return e.calculateOptionsCost()}))}),t}return{}}},{key:"componentDidMount",value:function(){var e=this,t=new j.a(new j.a.providers.HttpProvider("https://mainnet.infura.io/v3/3425960a247b4ae9b94e7d0e51c1bef0")),a=new B.a({web3:t});this.setState({ethereum:{web3:t},chartData:{},opynConnector:a}),this.setState({optionRequestState:"LOADING"}),a.init().then((function(t){var a=function(e){var t={};return e.forEach((function(e){var a=e.strike,n=e.underlying,s=e.expiry,i=C(a,n);void 0===t[i]&&(t[i]={}),void 0===t[i][s]&&(t[i][s]=[]),t[i][s].push(e)})),t}(t);e.setState({optionRequestState:"SUCCESS",optionsData:a})})).catch((function(t){return e.setState({optionRequestState:"FAILED"})}))}},{key:"updatePriceData",value:function(e,t){e>this.state.priceData.timestamp&&this.setState({priceData:t})}},{key:"updateChartData",value:function(e){this.setState({chartData:e})}},{key:"getErrorMessage",value:function(){return this.state.ethereum.web3?"LOADING"===this.state.optionRequestState?"Loading options... this may take up to 30 seconds":"FAILED"===this.state.optionRequestState?"Failed to fetch option data. Refresh to try again":void 0:"Failed to get web3 provider"}},{key:"render",value:function(){var e=this,t=this.state,a=t.optionsData,i=t.ethereum,o=t.optionRequestState,r=t.opynConnector;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:"logo"})),s.a.createElement("div",{className:"page-content"},i.web3&&"SUCCESS"===o?s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement(A,{optionsData:a,updateChartData:function(t){return e.updateChartData(t)},updatePriceData:function(t,a){return e.updatePriceData(t,a)},opynConnector:r})),s.a.createElement("div",{className:"container"},"The chart below assumes you are providing 1 ETH of value to the pool. 0.5 ETH and 0.5 ETH worth of USDC.",s.a.createElement(q.a,{highcharts:R.a,options:this.chartDataToDisplay()}))):s.a.createElement("div",{className:"container"},this.getErrorMessage())),s.a.createElement("div",{className:"footer"},s.a.createElement("a",{href:"https://github.com/conspyrosy/hedgehog"},"Contribute"))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e){e.exports=JSON.parse('[{"token0":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","token1":"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","token0_name":"ETH","token1_name":"USDC","pair_address":"0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc"}]')}},[[247,1,2]]]);
//# sourceMappingURL=main.9101a61b.chunk.js.map